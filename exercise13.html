<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="description" />
    <meta name="keywords" content="keywords" />
    <meta name="author" content="author" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../default.css" media="screen" />
    <title>Exercise 13 - 8-puzzle</title>
    <script type="text/javascript" src="../jquery.js"></script>
    <style type="text/css">
        .puzzle {
            position: relative;
            top: 0px;
            left: 0px;
            border: 1px solid #000;
        }
    </style>
    <script type="text/javascript">

        var arr = [0,1,2,3,4,5,6,7,8];

        $(document).ready(function() {
            // set the initial puzzle

           arr.sort(random);
           arr.join(",");

            for(i=0 ; i<9; i++){
                //console.log(document.getElementById('pic' + i));
             part(document.getElementById('pic' + i), arr[i] );   
            }

             // $("#pic" + Math.floor(Math.random()*9) ).attr("hidden", true);
             $("#pic" + Math.floor(Math.random()*9) ).css({"display":"none"});


            $("img").click(function(){
                //console.log($(this).attr("id"));
                var id = $(this).attr("id")

                switch (id){

                    case "pic0":
                    if($("#pic1").is(":hidden")){
                        check(id, "pic1");
                    }
                    if($("#pic3").is(":hidden")){
                        check(id, "pic3");
                    }
                    break;
                    
                    case "pic1":
                    if($("#pic0").is(":hidden")){
                        check(id, "pic0");
                    }
                    if($("#pic2").is(":hidden")){
                        check(id, "pic2");
                    }
                    if($("#pic4").is(":hidden")){
                        check(id, "pic4");
                    }
                    break;

                    case "pic2":
                    if($("#pic1").is(":hidden")){
                        check(id, "pic1");
                    }
                    if($("#pic5").is(":hidden")){
                        check(id, "pic5");
                    }
                    break;

                    case "pic3":
                    if($("#pic0").is(":hidden")){
                        check(id, "pic0");
                    }
                    if($("#pic4").is(":hidden")){
                        check(id, "pic4");
                    }
                    if($("#pic6").is(":hidden")){
                        check(id, "pic6");
                    }


                    break;

                    case "pic4":
                    if($("#pic1").is(":hidden")){
                        check(id, "pic1");
                    }
                    if($("#pic3").is(":hidden")){
                        check(id, "pic3");
                    }
                    if($("#pic5").is(":hidden")){
                        check(id, "pic5");
                    }
                    if($("#pic7").is(":hidden")){
                        check(id, "pic7");
                    }
                    break;

                    case "pic5":
                    if($("#pic2").is(":hidden")){
                        check(id, "pic2");
                    }
                    if($("#pic4").is(":hidden")){
                        check(id, "pic4");
                    }
                    if($("#pic8").is(":hidden")){
                        check(id, "pic8");
                    }
                    break;

                    case "pic6":
                    if($("#pic3").is(":hidden")){
                        check(id, "pic3");
                    }
                    if($("#pic7").is(":hidden")){
                        check(id, "pic7");
                    }
                    break;

                    case "pic7":
                    if($("#pic4").is(":hidden")){
                        check(id, "pic4");
                    }
                    if($("#pic6").is(":hidden")){
                        check(id, "pic6");
                    }
                    if($("#pic8").is(":hidden")){
                        check(id, "pic8");
                    }
                    break;

                    case "pic8":
                    if($("#pic5").is(":hidden")){
                        check(id, "pic5");
                    }
                    if($("#pic7").is(":hidden")){
                        check(id, "pic7");
                    }

                }
            }); //click

           
        }); // ready 


        function check(thisId, checkAnoId){
            var top = $("#"+checkAnoId)[0].style.top;
            var left = $("#"+checkAnoId)[0].style.left;
            var hidden = $("#"+checkAnoId).is(":hidden");

            var topTemp = $("#"+thisId)[0].style.top;
            var leftTemp = $("#"+thisId)[0].style.left;
            var hiddenTemp = $("#"+thisId).is(":hidden");

            $("#"+thisId).css({"top":top+"px" ,"left":left, "display":"none" });

            $("#"+checkAnoId).css({"top":topTemp ,"left":leftTemp, "display":"block"});

        }// check


            


         //call this function to show part of image.
        function part(block, pos) {
            x = parseInt(pos / 3);
            y = pos % 3;
            x *= -110;
            y *= -110;
                //console.log("x "+x +", " + "y"+y)
            block.style.top = x + 'px';
            block.style.left = y + 'px';
        } // part


        // random
        function random (a, b){
            return Math.random() - 0.5;
        }


    </script>
</head>

<body>
    <div class="container2">

        <div class="header">
            <div class="title">
                Exercise 13
                <h1>8-puzzle</h1>
            </div>
        </div>

        <div class="navigation">
            <a href="../index.html">Home</a>
            <div class="clearer"><span></span>
            </div>
        </div>

        <div class="main">
            <div class="content">

                <p>
                    將一張jpg分割成9塊，隨機去掉一塊，其餘8塊可在畫面上9格移動。
                    <br/>
                    <blockquote>Hint: <a target="_blank" href="http://www.w3schools.com/jquery/jquery_css.asp">css</a>
                    </blockquote>
                </p>

                <p>
                    <table>
                        <tr>
                            <td>
                                <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                    <img id="pic0" src="img/ex4img.jpg" class="puzzle" style="display:block" />
                                </div>
                            </td>
                            <td>
                                <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                    <img id="pic1" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                                </div>
                            </td>
                            <td>
                                <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                    <img id="pic2" src="img/ex4img.jpg" class="puzzle" style="display:block" />
                                </div>
                            </td>
                        </tr>
                        <td>
                            <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                <img id="pic3" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                            </div>
                        </td>
                        <td>
                            <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                <img id="pic4" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                            </div>
                        </td>
                        <td>
                            <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                <img id="pic5" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                            </div>
                        </td>
                        </tr>
                        </tr>
                        <td>
                            <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                <img id="pic6" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                            </div>
                        </td>
                        <td>
                            <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                <img id="pic7" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                            </div>
                        </td>
                        <td>
                            <div style="width:110px;height:110px;border:1px;overflow:hidden;">
                                <img id="pic8" src="img/ex4img.jpg" class="puzzle" style="display:block"/>
                            </div>
                        </td>
                        </tr>
                    </table>

                </p>

                <script type="text/javascript">
                </script>

            </div>
            <div class="clearer"><span></span>
            </div>

        </div>

        <div class="footer">&copy; 2006 <a href="index.html">Website.com</a>. Valid <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> &amp; <a href="http://validator.w3.org/check?uri=referer">XHTML</a>. Template design by <a href="http://templates.arcsin.se">Arcsin</a>
        </div>
    </div>
</body>

</html>
